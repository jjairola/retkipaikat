# Pylint-raportti

Pylint antaa seuraavan raportin sovelluksesta:

```
************* Module app
src/app.py:1:0: C0114: Missing module docstring (missing-module-docstring)
src/app.py:20:0: C0116: Missing function or method docstring (missing-function-docstring)
src/app.py:41:0: C0116: Missing function or method docstring (missing-function-docstring)
src/app.py:63:0: C0116: Missing function or method docstring (missing-function-docstring)
src/app.py:80:0: C0116: Missing function or method docstring (missing-function-docstring)
src/app.py:80:0: R1710: Either all return statements in a function should return an expression, or none of them should. (inconsistent-return-statements)
src/app.py:138:0: C0116: Missing function or method docstring (missing-function-docstring)
src/app.py:138:0: R0911: Too many return statements (7/6) (too-many-return-statements)
src/app.py:138:0: R1710: Either all return statements in a function should return an expression, or none of them should. (inconsistent-return-statements)
src/app.py:208:0: C0116: Missing function or method docstring (missing-function-docstring)
src/app.py:208:0: R1710: Either all return statements in a function should return an expression, or none of them should. (inconsistent-return-statements)
src/app.py:235:0: C0116: Missing function or method docstring (missing-function-docstring)
src/app.py:235:0: R0911: Too many return statements (8/6) (too-many-return-statements)
src/app.py:235:0: R1710: Either all return statements in a function should return an expression, or none of them should. (inconsistent-return-statements)
src/app.py:282:0: C0116: Missing function or method docstring (missing-function-docstring)
src/app.py:282:0: R1710: Either all return statements in a function should return an expression, or none of them should. (inconsistent-return-statements)
src/app.py:307:0: C0116: Missing function or method docstring (missing-function-docstring)
src/app.py:315:0: C0116: Missing function or method docstring (missing-function-docstring)
src/app.py:349:0: C0116: Missing function or method docstring (missing-function-docstring)
src/app.py:349:0: R1710: Either all return statements in a function should return an expression, or none of them should. (inconsistent-return-statements)
src/app.py:392:0: C0116: Missing function or method docstring (missing-function-docstring)
src/app.py:392:0: R1710: Either all return statements in a function should return an expression, or none of them should. (inconsistent-return-statements)
src/app.py:419:0: C0116: Missing function or method docstring (missing-function-docstring)
src/app.py:436:0: C0116: Missing function or method docstring (missing-function-docstring)
src/app.py:465:0: C0116: Missing function or method docstring (missing-function-docstring)
src/app.py:476:0: C0116: Missing function or method docstring (missing-function-docstring)
src/app.py:494:0: C0116: Missing function or method docstring (missing-function-docstring)
src/app.py:502:4: C0116: Missing function or method docstring (missing-function-docstring)
src/app.py:506:4: C0116: Missing function or method docstring (missing-function-docstring)
************* Module classes
src/classes.py:1:0: C0114: Missing module docstring (missing-module-docstring)
src/classes.py:4:0: C0116: Missing function or method docstring (missing-function-docstring)
src/classes.py:17:0: C0116: Missing function or method docstring (missing-function-docstring)
src/classes.py:38:0: C0116: Missing function or method docstring (missing-function-docstring)
************* Module comments
src/comments.py:1:0: C0114: Missing module docstring (missing-module-docstring)
src/comments.py:4:0: C0115: Missing class docstring (missing-class-docstring)
src/comments.py:8:0: C0116: Missing function or method docstring (missing-function-docstring)
src/comments.py:17:0: C0116: Missing function or method docstring (missing-function-docstring)
src/comments.py:25:0: C0116: Missing function or method docstring (missing-function-docstring)
src/comments.py:34:0: C0116: Missing function or method docstring (missing-function-docstring)
src/comments.py:42:0: C0116: Missing function or method docstring (missing-function-docstring)
src/comments.py:50:0: C0116: Missing function or method docstring (missing-function-docstring)
************* Module config
src/config.py:1:0: C0114: Missing module docstring (missing-module-docstring)
************* Module db
src/db.py:1:0: C0114: Missing module docstring (missing-module-docstring)
src/db.py:5:0: C0116: Missing function or method docstring (missing-function-docstring)
src/db.py:13:0: C0116: Missing function or method docstring (missing-function-docstring)
src/db.py:20:0: C0116: Missing function or method docstring (missing-function-docstring)
src/db.py:31:0: C0116: Missing function or method docstring (missing-function-docstring)
src/db.py:35:0: C0116: Missing function or method docstring (missing-function-docstring)
************* Module destinations
src/destinations.py:1:0: C0114: Missing module docstring (missing-module-docstring)
src/destinations.py:4:0: C0115: Missing class docstring (missing-class-docstring)
src/destinations.py:8:0: C0116: Missing function or method docstring (missing-function-docstring)
src/destinations.py:25:0: C0116: Missing function or method docstring (missing-function-docstring)
src/destinations.py:33:0: C0116: Missing function or method docstring (missing-function-docstring)
src/destinations.py:33:0: R0913: Too many arguments (6/5) (too-many-arguments)
src/destinations.py:33:0: R0917: Too many positional arguments (6/5) (too-many-positional-arguments)
src/destinations.py:33:0: R0914: Too many local variables (21/15) (too-many-locals)
src/destinations.py:113:0: C0116: Missing function or method docstring (missing-function-docstring)
src/destinations.py:123:0: C0116: Missing function or method docstring (missing-function-docstring)
src/destinations.py:128:0: C0116: Missing function or method docstring (missing-function-docstring)
src/destinations.py:133:0: C0116: Missing function or method docstring (missing-function-docstring)
src/destinations.py:138:0: C0116: Missing function or method docstring (missing-function-docstring)
src/destinations.py:143:0: C0116: Missing function or method docstring (missing-function-docstring)
src/destinations.py:158:0: C0116: Missing function or method docstring (missing-function-docstring)
src/destinations.py:175:0: C0116: Missing function or method docstring (missing-function-docstring)
src/destinations.py:181:0: C0116: Missing function or method docstring (missing-function-docstring)
************* Module ratings
src/ratings.py:1:0: C0114: Missing module docstring (missing-module-docstring)
src/ratings.py:4:0: C0115: Missing class docstring (missing-class-docstring)
src/ratings.py:8:0: C0116: Missing function or method docstring (missing-function-docstring)
************* Module seed
src/seed.py:1:0: C0114: Missing module docstring (missing-module-docstring)
src/seed.py:13:0: C0116: Missing function or method docstring (missing-function-docstring)
************* Module users
src/users.py:1:0: C0114: Missing module docstring (missing-module-docstring)
src/users.py:6:0: C0115: Missing class docstring (missing-class-docstring)
src/users.py:10:0: C0115: Missing class docstring (missing-class-docstring)
src/users.py:14:0: C0116: Missing function or method docstring (missing-function-docstring)
src/users.py:24:0: C0116: Missing function or method docstring (missing-function-docstring)
src/users.py:35:0: C0116: Missing function or method docstring (missing-function-docstring)
************* Module utils
src/utils.py:1:0: C0114: Missing module docstring (missing-module-docstring)
src/utils.py:9:0: C0116: Missing function or method docstring (missing-function-docstring)
src/utils.py:16:0: C0116: Missing function or method docstring (missing-function-docstring)
src/utils.py:20:0: C0116: Missing function or method docstring (missing-function-docstring)
src/utils.py:26:0: C0116: Missing function or method docstring (missing-function-docstring)
src/utils.py:30:0: C0116: Missing function or method docstring (missing-function-docstring)
src/utils.py:35:0: C0116: Missing function or method docstring (missing-function-docstring)
src/utils.py:40:0: C0116: Missing function or method docstring (missing-function-docstring)
src/utils.py:48:0: C0116: Missing function or method docstring (missing-function-docstring)

------------------------------------------------------------------
Your code has been rated at 8.65/10 (previous run: 9.81/10, -1.16)

```
## Docstring-ilmoitukset (C0114, C0115, C0116)

Suurin osa pylint ilmoituksista on ovat docstring virheitä:

```
src/app.py:1:0: C0114: Missing module docstring (missing-module-docstring)
src/app.py:20:0: C0116: Missing function or method docstring (missing-function-docstring)
src/comments.py:4:0: C0115: Missing class docstring (missing-class-docstring)
```

Nämä ovat ilmoituksia, että sovelluksen koodissa ei ole käytetty docstring kommentteja. Näistä päätetty, ettei docstring -komentteja käytetä tässä sovelluksessa.

## Puuttuva palautusarvo (R1710)

Toiseksi suurin osa pylint virheistä tulee app.py:n tavasta käsitellä GET ja POST pyynnöt samassa funktiossa. Koodin luettevuuden ja selkeyden takia ```request.method``` tarkistetaan molemmille pyynnöille if -lauseella, sen takia
funktio ei saa paluuarvoa else -tapaukessa. Funktiolla on myös annotaatio joka määrittää, että funktio on joko GET tai POST, joten funktion paluuarvon puute ei ole ongelma tässä tapauksessa.

```
src/app.py:80:0: R1710: Either all return statements in a function should return an expression, or none of them should. (inconsistent-return-statements)
```

Näitä ilmoituksia ei myöskään tarvitse huomioida.

## Liikaa argumentteja funktioon (R0913, R0917)

```
src/destinations.py:33:0: R0913: Too many arguments (6/5) (too-many-arguments)
src/destinations.py:33:0: R0917: Too many positional arguments (6/5) (too-many-positional-arguments)
```


```destionations.py``` tietokantakutsulla on useampi argumentti. Näissä on hakuehdot ja sivuutusparametrit. Useamman parametrin sijaan olisi voinut käyttää kahta ```filter```ja ```pagination``` parametreja, joissa olisi ollut useampi parametri samassa. Mutta koska käytössä ei ole tyypitettyjä tietorakenteita, on helpompi käyttää nimettyjä parameterejä.
```
def get_destinations(
    user_id=None,
    destination_id=None,
    query_text=None,
    query_class=None,
    page=None,
    page_size=None,
):
```

Retkipaikan (destinations) tietokantakyselyt on haluttu keskittää mahdollisimman paljon yhteen funktioon/sql:ään, jotta ylläpidon määrä ja virheiden määrä pienenee.

## Liian monta palautuslausetta (R0911)

App.py tiedostossa tulee varoituksia, että funktoilla on useita palautuslauseita. Tämä johtuu form -validoinneista, jotka on tehty if-lauseilla. Formien validointi palauttaa funktion vastauksen ensimmäiseestä form virheestä. Tämä tekee validoinneista yksinkertaisen ja koodi on helposti luettavaa.

```
src/app.py:138:0: R0911: Too many return statements (7/6) (too-many-return-statements)
```

Jos ohjelman koko kasvaisi, kannattaisi miettiä erillistä validaattoriluokkaa.

## Liikaa paikallisia muuttujia (R0914)

```
src/destinations.py:33:0: R0914: Too many local variables (21/15) (too-many-locals)
```

`get_destinations` funktiossa on useita paikallisia muuttujia, koska se rakentaa argumenttien kukaan SQL-kyselyä. Tämä tekee kyselystä monipuolisen ja samalla vähentää tarvitta ylläpitää retkikohteiden hakuun liittyviä tietokantakyselyitä useammassa paikassa.

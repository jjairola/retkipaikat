{% if page %}

{% set buttons = 5 %}

{% if buttons > page_count %}
    {% set buttons = page_count %}
{% endif %}

{% set start = page - (buttons // 2) %}
{% if start < 1 %}
    {% set start = 1 %}
{% endif %}
{% if start + buttons - 1 > page_count %}
    {% set start = page_count - buttons + 1 %}
    {% if start < 1 %}
        {% set start = 1 %}
    {% endif %}
{% endif %}

<ul class="pagination">
    {% with disabled = 'disabled' if page == 1 else '' %}
    <li><a class="{{disabled}}" href="{{ url_for('index', page=1) }}">&lt;&lt;</a></li>
    {% endwith %}
    {% for p in range(start, start + buttons) %}
        {% if p == page %}
            <li><a class="active" href="{{ url_for('index', page=p) }}">{{ p }}</a></li>
        {% else %}
            <li><a href="{{ url_for('index', page=p) }}">{{ p }}</a></li>
        {% endif %}
    
    {% endfor %}
    {% with disabled = 'disabled' if page == page_count else '' %}
    <li><a class="{{disabled}}" href="{{ url_for('index', page=page_count) }}">&gt;&gt;</a></li>
    {% endwith %}
</ul>

{% endif %}